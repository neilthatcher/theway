<!doctype html>
<head>
  <meta charset="utf-8">
<meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />  
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  
  <title>AcademyApp</title>
  <meta name="description" content="AcademyApp">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.3.1.min.js"></script>
</head>

<body>
  <div class="row">
      <div>
        <a href="signup.html">SIGN-UP</a>
        <a href="signin.html">SIGN-IN</a>
        <a href="createClass.html">CREATE_CLASS</a>
        <a href="event_list.html">EVENT_LIST</a>
        <a href="editMember.html">MEMBER_EDIT</a>
      </div>
  </div>
  <hr/> 

  <div id="main">
    <h1>The Way Taekwondo - FBCO</h1>
    <h3>SignUp Form</h3>
    
    

    <div class="row">
      <div class="span2">First Name:</div><div>
      <input id="firstname" type="text">*</div>
    </div>

    <div class="row">
      <div class="span2">Last Name:</div><div>
        <input id="lastname" type="text">*</div>
    </div>

    <div class="row">
      <div class="span2">Date of birth:</div><div>
        <input id="dateofbirth" type="date"/>*</div>
    </div>

    <div class="row">
      <div class="span2">Address:</div><div>
        <input id="address" type="text">*</div>
    </div>

    <div class="row">
      <div class="span2">City:</div><div>
        <input id="city" type="text" value="Oviedo">*</div>
    </div>

    <div class="row">
      <div class="span2">State:</div><div>
        <input id="state" type="text" value="FL">*</div>
    </div>

    <div class="row">
      <div class="span2">Zip:</div><div>
        <input id="zip" type="text">*</div>
    </div>

    <div class="row">
      <div class="span2">Phone:</div><div>
        <input id="phone" type="text">*</div>
    </div>

    <div class="row">
      <div class="span2">Email:</div><div>
        <input id="email" type="text">*</div>
    </div>

    <div class="row">
      <div class="span2">Marital Status:</div><div>
        <select id="maritalstatus">
          <option value="SINGLE">SINGLE</option>
          <option value="MARRIED">MARRIED</option>
        </select></div>
    </div>

    <div class="row">
      <div class="span2">Gender:</div><div>
        <select id="gender">
          <option value="MALE">MALE</option>
          <option value="FEMALE">FEMALE</option>
        </select></div>
    </div>

    <div class="row">
      <div class="span2">Family Code:</div><div>
        <input id="familyCode" type="text">*</div>
    </div>


    <div class="row">
      <div class="span2">Occupation:</div><div>
        <input id="occupation" type="text"></div>
    </div>

    <div class="row" id="msg"></div>
    
    <div class="row"><button onclick="saveForm()">Submit </button><button onclick="reset()">Reset </button></div>
    <button onclick="logout()">Logout</button>
  </div>

  <script type="text/javascript">
    Parse.initialize("qhJKJHGivO5op9dvRGxYXNr7Xjx3ru3hpDKXw9G0", "Xyov0zQSe7syEvlMgkUdUmKlQ1S9eQcq485MEqaG");
    function reset(){
      $( "#firstname" ).val("");
      $( "#lastname" ).val("");
      $( "#address" ).val("");
      $( "#dateofbirth" ).val("");
      $( "#city" ).val("");
      $( "#state" ).val("");
      $( "#zip" ).val("");
      $( "#phone" ).val("");
      $( "#email" ).val("");
      $( "#maritalstatus" ).val("");
      $( "#gender" ).val("");
      $( "#occupation" ).val("");
      $( "#familyCode" ).val("");
    }

    function saveForm(){
      showMsg("Saving, please wait", "");

      if($("#firstname").val().length <= 1 || $("#lastname").val().length <= 1 || $("#address").val().length < 1
        || $("#dateofbirth").val().length <= 2 && $("#city").val().length <= 2 || $("#state").val().length <= 1 
        || $("#zip").val().length <= 1 && $("#phone").val().length < 10 || $("#email").val().length <= 2){
          showMsg("Not all the fields are completed, please review the form", "err");
      }else{

        var Member = Parse.Object.extend("Member");
        var member = new Member();

        member.save({firstname: $( "#firstname" ).val().toUpperCase(), lastname: $( "#lastname" ).val().toUpperCase(), 
          address: $( "#address" ).val().toUpperCase(), dateOfBirth: $( "#dateofbirth" ).val(),
          city:  $( "#city" ).val().toUpperCase(), state: $( "#state" ).val().toUpperCase(),
          zip:  $( "#zip" ).val(), phone: $( "#phone" ).val(),
          email:  $( "#email" ).val(), maritalStatus: $( "#maritalstatus" ).val(),
          gender:  $( "#gender" ).val(), occupation: $( "#occupation" ).val().toUpperCase(),
          academyId: '1', familyCode: $("#familyCode").val(), currentBelt: "NONE"
        }, {
              success: function(object) {
                $(".success").show();
                reset();
                showMsg("Member saved!", "");
              },
              error: function(model, error) {
                showMsg("Something went wrong please try again", "err");
              }}); 
      }
    }

  function showMsg(message, type){
    $("#msg").empty();
    msgStyle = "color:black; font-weight:bold;";
    if(type == "err"){
      msgStyle = "color:red; font-weight:bold;";
    }
    $("#msg").append("<p style='"+msgStyle+"'>"+message+"</p>");
  }

  function logout(){
    Parse.User.logOut();
    window.location.href = "index.html";
  }

  var currentUser = Parse.User.current();
  if (!currentUser) {
    window.location.href = "index.html"
  }

  // Numeric only control handler
    jQuery.fn.ForceNumericOnly =
    function()
    {
        return this.each(function()
        {
            $(this).keydown(function(e)
            {
                var key = e.charCode || e.keyCode || 0;
                // allow backspace, tab, delete, enter, arrows, numbers and keypad numbers ONLY
                // home, end, period, and numpad decimal
                return (
                    key == 8 || 
                    key == 9 ||
                    key == 13 ||
                    key == 46 ||

                    key == 110 ||
                    key == 190 ||
                    (key >= 35 && key <= 40) ||
                    (key >= 48 && key <= 57) ||
                    (key >= 96 && key <= 105));
            });
        });
    };

    $("#zip").ForceNumericOnly();
    $("#phone").ForceNumericOnly();
    $("#familyCode").ForceNumericOnly();


  </script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery-2.1.0.min.js"></script>
</body>

</html>
