<!doctype html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />  
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  
  <title>AcademyApp</title>
  <meta name="description" content="AcademyApp">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.3.1.min.js"></script>
</head>

<body>
  <div class="row">
      <div>
        <a href="signup.html">SIGN-UP</a>
        <a href="signin.html">SIGN-IN</a>
        <a href="createClass.html">CREATE_CLASS</a>
        <a href="event_list.html">EVENT_LIST</a>
        <a href="editMember.html">MEMBER_EDIT</a>
      </div>
  </div>
  <hr/> 

  <div id="main">
    <h1>The Way Taekwondo - FBCO</h1>
    <h3>View Member Details</h3>
    
    <div class="row"><hr/>
      <div id="msg" ></div>
      <hr/>
    </div>
    
    <div class="row">
      <div class="span2">First Name:</div>
      <div id="firstname"></div>
    </div>

    <div class="row">
      <div class="span2">Last Name:</div>
      <div id="lastname"></div>
    </div>

    <div class="row">
      <div class="span2">Date of birth:</div>
      <div id="dateofbirth"></div>
    </div>

    <div class="row">
      <div class="span2">Address:</div>
      <div id="address"></div>
    </div>

    <div class="row">
      <div class="span2">City:</div>
      <div id="city"></div>
    </div>

    <div class="row">
      <div class="span2">State:</div>
      <div id="state"></div>
    </div>

    <div class="row">
      <div class="span2">Zip:</div>
      <div id="zip"></div>
    </div>

    <div class="row">
      <div class="span2">Phone:</div>
      <div id="phone"></div>
    </div>

    <div class="row">
      <div class="span2">Email:</div>
      <div id="email"></div>
    </div>

    <div class="row">
      <div class="span2">Marital Status:</div>
      <div id="maritalStatus"></div>
    </div>

    <div class="row">
      <div class="span2">Gender:</div><div id="gender"></div>
    </div>

    <div class="row">
      <div class="span2">Family Code:</div>
      <div id="familyCode" ></div>
    </div>


    <div class="row">
      <div class="span2">Occupation:</div>
      <div id="occupation"></div>
    </div>

    <div class="row">
      <div class="span2">CurrentBelt:</div>
      <div id="currentBelt"></div>
    </div>

    <div class="row">
      <div class="span2">CurrentHours:</div>
      <div id="currentHours"></div>
    </div>

    <div class="row">
      <br/><br/>
    </div>

    <div class="row">
      <button onclick="#">Edit Profile</button>
    </div>
 </div>

  <script type="text/javascript">
    Parse.initialize("qhJKJHGivO5op9dvRGxYXNr7Xjx3ru3hpDKXw9G0", "Xyov0zQSe7syEvlMgkUdUmKlQ1S9eQcq485MEqaG");
    function reset(){
      $( "#firstname" ).val("");
      $( "#lastname" ).val("");
      $( "#address" ).val("");
      $( "#dateofbirth" ).val("");
      $( "#city" ).val("");
      $( "#state" ).val("");
      $( "#zip" ).val("");
      $( "#phone" ).val("");
      $( "#email" ).val("");
      $( "#maritalstatus" ).val("");
      $( "#gender" ).val("");
      $( "#occupation" ).val("");
      $( "#currentBelt" ).val("");
      $( "$currentHours" ).val("");
    }

    var member;

    

  function logout(){
    Parse.User.logOut();
  }

  function getUrlParameter(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) 
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) 
        {
            return sParameterName[1];
        }
    }
}

  function getMemberData(memberID){
    showMsg("Loading data...", "");
    var Member = Parse.Object.extend("Member");
    var query = new Parse.Query(Member);
    query.equalTo("objectId", memberID);
    query.find({
      success: function(results) {
        if(results.length > 0){
          member = results[0];
          // populate form with data
          $("#firstname").append(member.get("firstname"));
          $("#lastname").append(member.get("lastname"));
          $("#dateofbirth").append(member.get("dateOfBirth"));
          $("#address").append(member.get("address"));
          $("#city").append(member.get("city"));
          $("#state").append(member.get("state"));
          $("#zip").append(member.get("zip"));
          $("#phone").append(member.get("phone"));
          $("#email").append(member.get("email"));
          $("#maritalStatus").append(member.get("maritalStatus"));
          $("#gender").append(member.get("gender"));
          $("#familyCode").append(member.get("familyCode"));
          $("#occupation").append(member.get("occupation"));
          $("#currentBelt").append(member.get("currentBelt"));
          $("#currentHours").append(member.get("currentBeltHours"));
        }
        showMsg("","");
      },
      error: function(error) {
        // alert("Error: " + error.code + " " + error.message);
        showMsg(error.message, "err");
      }
    });
  }

  function showMsg(message, type){
    $("#msg").empty();
    msgStyle = "color:black; font-weight:bold;";
    if(type == "err"){
      msgStyle = "color:red; font-weight:bold;";
    }
    $("#msg").append("<p style='"+msgStyle+"'>"+message+"</p>");
  }

  var currentUser = Parse.User.current();
  if (!currentUser) {
    window.location.href = "index.html"
  }else{
    // if an id was passed look for that member
    var memberId = getUrlParameter('memId');
    if(memberId.length > 0){
      getMemberData(memberId);
    }
  }
  </script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery-2.1.0.min.js"></script>
</body>

</html>
